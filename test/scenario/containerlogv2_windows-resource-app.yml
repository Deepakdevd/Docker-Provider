apiVersion: apps/v1
kind: Deployment
metadata:
  name: windows-resource-intensive-app
  namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app: windows-resource-intensive-app
  template:
    metadata:
      labels:
        app: windows-resource-intensive-app
    spec:
      nodeSelector:
        kubernetes.io/os: windows
      containers:
      - name: windows-resource-intensive-app
        image: mcr.microsoft.com/windows/servercore:ltsc2022
        command: ["powershell", "-c"]
        args:
          - |
            $counter = 1
            while ($true) {
              Write-Output "Loop $counter"
              # CPU and Memory intensive operations
              $result = 1
              for ($i = 1; $i -le 10000; $i++) {
                $result = [Math]::Pow($result + $i, 2)
              }
              $counter++
              Start-Sleep -Seconds 1
            }

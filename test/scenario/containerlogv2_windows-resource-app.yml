apiVersion: apps/v1
kind: Deployment
metadata:
  name: windows-resource-intensive-app
  namespace: kube-system
spec:
  replicas: 10
  selector:
    matchLabels:
      app: windows-resource-intensive-app
  template:
    metadata:
      labels:
        app: windows-resource-intensive-app
    spec:
      nodeSelector:
        kubernetes.io/os: windows
      containers:
      - name: windows-resource-intensive-app
        image: mcr.microsoft.com/windows/servercore:ltsc2022
        command: ["powershell", "-c"]
        args:
          - |
            $counter = 1
            while ($true) {
              Write-Output "Loop $counter"
              # CPU and Memory intensive operations
              $result = 1
              for ($i = 1; $i -le 10000; $i++) {
                $result = [Math]::Pow($result + $i, 2)
              }
              $counter++
              Start-Sleep -Seconds 1
            }
## thound logs per second
## 10 pods in certain nodes combining logs each generate some logs  scale  performance  podlevel
## multiple 100 pods

## nodes level testing  both windows linux   if api then proabbly node level   kubelet


## create a branch for current code branch for testing current stage